<!DOCTYPE html>
<html>
<head>
  <title>Mini Instagram Firebase</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body{
      margin:0;
      font-family: Arial;
      background:#fafafa;
    }
    header{
      background:white;
      padding:15px;
      text-align:center;
      font-weight:bold;
      font-size:20px;
      border-bottom:1px solid #ddd;
      position:sticky;
      top:0;
    }
    .post{
      background:white;
      margin:20px;
      border-radius:10px;
      box-shadow:0 0 10px rgba(0,0,0,0.1);
      overflow:hidden;
    }
    .post img{
      width:100%;
    }
    .actions{
      padding:10px;
    }
    button{
      padding:5px 10px;
      border:none;
      background:#ff2e63;
      color:white;
      border-radius:5px;
      cursor:pointer;
    }
  </style>
</head>
<body>

<header>üî• Mini Instagram</header>

<div class="post">
  <img src="https://picsum.photos/400/300">
  <div class="actions">
    <button onclick="likePost()">‚ù§Ô∏è Like</button>
    <p id="likeCount">Loading...</p>
  </div>
</div>

<script type="module">

// üî• Firebase Imports
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
import { getFirestore, doc, getDoc, setDoc, updateDoc } 
from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

// üî• Tumhara Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyAtJzjzNsBvMVj6bOfByWzX21hxSAyLYVQ",
  authDomain: "mini-instagram-95485.firebaseapp.com",
  projectId: "mini-instagram-95485",
  storageBucket: "mini-instagram-95485.firebasestorage.app",
  messagingSenderId: "426906615408",
  appId: "1:426906615408:web:1ba85f1d00b9c09e083eb5",
  measurementId: "G-V8E6NEGGZD"
};

// üî• Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
const db = getFirestore(app);

// üî• Firestore Like System
const likeRef = doc(db, "posts", "post1");

async function loadLikes(){
  const docSnap = await getDoc(likeRef);
  if(docSnap.exists()){
    document.getElementById("likeCount").innerText =
      docSnap.data().likes + " Likes";
  } else {
    await setDoc(likeRef, { likes: 0 });
    document.getElementById("likeCount").innerText = "0 Likes";
  }
}

async function likePost(){
  const docSnap = await getDoc(likeRef);
  let currentLikes = docSnap.data().likes;
  currentLikes++;
  await updateDoc(likeRef, { likes: currentLikes });
  document.getElementById("likeCount").innerText =
    currentLikes + " Likes";
}

window.likePost = likePost;
loadLikes();

</script>

</body>
</html>
