<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Firebase Story Hub</title>

<style>
body{margin:0;font-family:Segoe UI;background:#f2f2f2;display:flex;flex-direction:column;align-items:center;}
header{width:100%;padding:15px;background:#ff6b81;color:#fff;text-align:center;font-size:22px;}
.container{width:95%;max-width:500px;margin-top:15px;}
input,textarea{width:100%;padding:12px;margin-top:10px;border-radius:10px;border:1px solid #ccc;}
button{margin-top:10px;padding:12px;width:100%;border:none;border-radius:10px;background:#ff6b81;color:#fff;font-size:16px;}
.story{background:#fff;padding:12px;margin-top:15px;border-radius:10px;box-shadow:0 5px 10px rgba(0,0,0,.1);}
.delete{background:#ff4757;margin-top:8px;}
</style>
</head>

<body>

<header>ðŸ”¥ Firebase Story Hub</header>

<div class="container">
<input id="title" placeholder="Story title">
<textarea id="text" rows="5" placeholder="Write story here..."></textarea>
<button onclick="addStory()">Upload Story</button>
<div id="stories"></div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import {
getFirestore, collection, addDoc, deleteDoc, doc, onSnapshot, query, orderBy
} from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

/* ðŸ”¥ TUMHARA CONFIG */
const firebaseConfig = {
apiKey: "AIzaSyAtJzjzNsBvMVj6bOfByWzX21hxSAyLYVQ",
authDomain: "mini-instagram-95485.firebaseapp.com",
projectId: "mini-instagram-95485",
storageBucket: "mini-instagram-95485.firebasestorage.app",
messagingSenderId: "426906615408",
appId: "1:426906615408:web:1ba85f1d00b9c09e083eb5",
measurementId: "G-V8E6NEGGZD"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const colRef = collection(db,"stories");

window.addStory = async function(){
let title=document.getElementById("title").value;
let text=document.getElementById("text").value;
if(!title||!text) return alert("Fill all fields");

await addDoc(colRef,{title,text,time:Date.now()});
document.getElementById("title").value="";
document.getElementById("text").value="";
}

window.del = async function(id){
await deleteDoc(doc(db,"stories",id));
}

const q=query(colRef,orderBy("time","desc"));

onSnapshot(q,(snap)=>{
let box=document.getElementById("stories");
box.innerHTML="";
snap.forEach(d=>{
let s=d.data();
box.innerHTML+=`
<div class="story">
<h3>${s.title}</h3>
<p>${s.text}</p>
<button class="delete" onclick="del('${d.id}')">Delete</button>
</div>`;
});
});
</script>

</body>
</html>
